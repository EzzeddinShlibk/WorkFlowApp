@model IEnumerable<ProjectTask>
<div class="container-fluid">
 
    <div class="row">
        <div class="col-sm-12">
            <div class="page-title-box">
                <div class="row">
                    <div class="col">
                        <h4 class="page-title">مهامي</h4>
                    </div> 
                </div> 
            </div> 
        </div> 
    </div> 
    <div class="row">
        <div class="col-12">

            @if (Model.Any())
            {

                <div class="kanban-board">
                    <div class="kanban-col">
                        <div class="kanban-main-card">
                            <div class="kanban-box-title">
                                <h4 class="font-14 mt-0 mb-3">  <i class="mdi mdi-circle d-block mt-n2 font-14 text-purple"> بانتظار البدء  </i> </h4>

                            </div>

                            <div id="project-list-left" class="pb-1">
                                @{
                                    int i1 = 0;
                                }
                                @foreach (var item in Model.Where(k => k.statues.Num == 1))
                                {
                                    i1++;
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="dropdown d-inline-block float-end">
                                                <a class="dropdown-toggle me-n2 mt-n2" id="drop2" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                                                    <i class="las la-ellipsis-v font-18 text-muted"></i>
                                                </a>
                                                <div class="dropdown-menu dropdown-menu-end" aria-labelledby="drop2">
                                                    <a class="dropdown-item" asp-controller="ProjectTasks" asp-action="EditTask" asp-route-id="@item.Id">اكمال المهمة</a>
                                                </div>
                                            </div>
                                            <i class="mdi mdi-flag d-block mt-n2 font-14 text-@item.priority.Color"><b> @item.priority.Name</b></i>
                                            <h5 class="my-1 font-14">@item.Name</h5>
                                            <p class="text-muted mb-0">@item.Description</p>
                                            <div class="row justify-content-center">
                                                <div class="col-6 align-self-center">
                                                    <ul class="list-inline mb-0">
                                                        <li class="list-item d-inline-block">
                                                            <a class="" href="#">
                                                                <i class="mdi mdi-comment-outline text-muted"></i>
                                                                <span class="text-muted fw-bold">@item.Comments.Count</span>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="col-6 align-self-center">
                                                    <p class="float-end text-muted mb-0">@item.EndDate.ToShortDateString()</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }

                                @if (i1 == 0)
                                {
                                    <div class="card">
                                        <div class="card-body">
                                            لايوجد مهام
                                        </div>
                                    </div>
                                }

                            </div>
                        </div>
                    </div>



                    <div class="kanban-col">
                        <div class="kanban-main-card">
                            <div class="kanban-box-title">
                                <h4 class="font-14 mt-0 mb-3">  <i class="mdi mdi-circle d-block mt-n2 font-14 text-danger">  توقف حرج  </i> </h4>

                            </div>


                            <div id="project-list-center-left" class="pb-1">
                                @{
                                    int i2 = 0;
                                }
                                @foreach (var item in Model.Where(k => k.statues.Num == 2))
                                {
                                    i2++;
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="dropdown d-inline-block float-end">
                                                <a class="dropdown-toggle me-n2 mt-n2" id="drop2" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                                                    <i class="las la-ellipsis-v font-18 text-muted"></i>
                                                </a>
                                                <div class="dropdown-menu dropdown-menu-end" aria-labelledby="drop2">
                                                    <a class="dropdown-item" asp-controller="ProjectTasks" asp-action="EditTask" asp-route-id="@item.Id">اكمال المهمة</a>
                                                </div>
                                            </div>
                                            <i class="mdi mdi-flag d-block mt-n2 font-14 text-@item.priority.Color"><b> @item.priority.Name</b></i>
                                            <h5 class="my-1 font-14">@item.Name</h5>
                                            <p class="text-muted mb-0">@item.Description</p>
                                            <div class="row justify-content-center">
                                                <div class="col-6 align-self-center">
                                                    <ul class="list-inline mb-0">
                                                        <li class="list-item d-inline-block">
                                                            <a class="" href="#">
                                                                <i class="mdi mdi-comment-outline text-muted"></i>
                                                                <span class="text-muted fw-bold">@item.Comments.Count</span>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="col-6 align-self-center">
                                                    <p class="float-end text-muted mb-0">@item.EndDate.ToShortDateString()</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                                @if (i2 == 0)
                                {
                                    <div class="card">
                                        <div class="card-body">
                                         لايوجد مهام
                                        </div>
                                    </div>
                                }
                            </div>




                        </div>
                    </div>



                    <div class="kanban-col">
                        <div class="kanban-main-card">
                            <div class="kanban-box-title">
                                <h4 class="font-14 mt-0 mb-3">  <i class="mdi mdi-circle d-block mt-n2 font-14 text-warning">   بانتظار المراجعة  </i> </h4>


                            </div>

                            <div id="project-list-center-right" class="pb-1">
                                @{
                                    int i3 = 0;
                                }
                                @foreach (var item in Model.Where(k => k.statues.Num == 3))
                                {
                                    i3++;
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="dropdown d-inline-block float-end">
                                                <a class="dropdown-toggle me-n2 mt-n2" id="drop2" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                                                    <i class="las la-ellipsis-v font-18 text-muted"></i>
                                                </a>
                                                <div class="dropdown-menu dropdown-menu-end" aria-labelledby="drop2">
                                                    <a class="dropdown-item" asp-controller="ProjectTasks" asp-action="EditTask" asp-route-id="@item.Id">اكمال المهمة</a>
                                                </div>
                                            </div>
                                            <i class="mdi mdi-flag d-block mt-n2 font-14 text-@item.priority.Color"><b> @item.priority.Name</b></i>
                                            <h5 class="my-1 font-14">@item.Name</h5>
                                            <p class="text-muted mb-0">@item.Description</p>
                                            <div class="row justify-content-center">
                                                <div class="col-6 align-self-center">
                                                    <ul class="list-inline mb-0">
                                                        <li class="list-item d-inline-block">
                                                            <a class="" href="#">
                                                                <i class="mdi mdi-comment-outline text-muted"></i>
                                                                <span class="text-muted fw-bold">@item.Comments.Count</span>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="col-6 align-self-center">
                                                    <p class="float-end text-muted mb-0">@item.EndDate.ToShortDateString()</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }

                                @if (i3 == 0)
                                {
                                    <div class="card">
                                        <div class="card-body">
                                            لايوجد مهام
                                        </div>
                                    </div>
                                }
                            </div>

                        </div>
                    </div>


                    <div class="kanban-col">
                        <div class="kanban-main-card">
                            <div class="kanban-box-title">
                                <h4 class="font-14 mt-0 mb-3">  <i class="mdi mdi-circle d-block mt-n2 font-14 text-blue">  قيد التنفيد  </i> </h4>

                            </div>

                            <div id="project-list-center" class="pb-1">
                                @{
                                    int i4 = 0;
                                }
                                @foreach (var item in Model.Where(k => k.statues.Num == 4))
                                {
                                    i4++;
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="dropdown d-inline-block float-end">
                                                <a class="dropdown-toggle me-n2 mt-n2" id="drop2" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                                                    <i class="las la-ellipsis-v font-18 text-muted"></i>
                                                </a>
                                                <div class="dropdown-menu dropdown-menu-end" aria-labelledby="drop2">
                                                    <a class="dropdown-item" asp-controller="ProjectTasks" asp-action="EditTask" asp-route-id="@item.Id">اكمال المهمة</a>
                                                </div>
                                            </div>
                                            <i class="mdi mdi-flag d-block mt-n2 font-14 text-@item.priority.Color"><b> @item.priority.Name</b></i>
                                            <h5 class="my-1 font-14">@item.Name</h5>
                                            <p class="text-muted mb-0">@item.Description</p>
                                            <div class="row justify-content-center">
                                                <div class="col-6 align-self-center">
                                                    <ul class="list-inline mb-0">
                                                        <li class="list-item d-inline-block">
                                                            <a class="" href="#">
                                                                <i class="mdi mdi-comment-outline text-muted"></i>
                                                                <span class="text-muted fw-bold">@item.Comments.Count</span>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="col-6 align-self-center">
                                                    <p class="float-end text-muted mb-0">@item.EndDate.ToShortDateString()</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                                @if (i4 == 0)
                                {
                                    <div class="card">
                                        <div class="card-body">
                                            لايوجد مهام
                                        </div>
                                    </div>
                                }

                            </div>

                        </div>
                    </div>


                    <div class="kanban-col">
                        <div class="kanban-main-card">
                            <div class="kanban-box-title">
                                <h4 class="font-14 mt-0 mb-3">  <i class="mdi mdi-circle d-block mt-n2 font-14 text-success">  مكتملة  </i> </h4>

                            </div>

                            <div id="project-list-right" class="pb-1">
                                @{
                                    int i5 = 0;
                                }
                                @foreach (var item in Model.Where(k => k.statues.Num == 5))
                                {
                                    i5++;

                                    <div class="card">
                                        <div class="card-body">
                                            <div class="dropdown d-inline-block float-end">
                                                <a class="dropdown-toggle me-n2 mt-n2" id="drop2" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                                                    <i class="las la-ellipsis-v font-18 text-muted"></i>
                                                </a>
                                                <div class="dropdown-menu dropdown-menu-end" aria-labelledby="drop2">
                                                    <a class="dropdown-item" asp-controller="ProjectTasks" asp-action="EditTask" asp-route-id="@item.Id">اكمال المهمة</a>
                                                </div>
                                            </div>
                                            <i class="mdi mdi-flag d-block mt-n2 font-14 text-@item.priority.Color"><b> @item.priority.Name</b></i>
                                            <h5 class="my-1 font-14">@item.Name</h5>
                                            <p class="text-muted mb-0">@item.Description</p>
                                            <div class="row justify-content-center">
                                                <div class="col-6 align-self-center">
                                                    <ul class="list-inline mb-0">
                                                        <li class="list-item d-inline-block">
                                                            <a class="" href="#">
                                                                <i class="mdi mdi-comment-outline text-muted"></i>
                                                                <span class="text-muted fw-bold">@item.Comments.Count</span>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="col-6 align-self-center">
                                                    <p class="float-end text-muted mb-0">@item.EndDate.ToShortDateString()</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                                @if (i5 == 0)
                                {
                                    <div class="card">
                                        <div class="card-body">
                                            لايوجد مهام
                                        </div>
                                    </div>
                                }


                            </div>

                        </div>
                    </div>

                </div>
            }
        </div>
    </div>

</div>
@section styles {
    <link href="~/lib/dragula/dragula.min.css" rel="stylesheet" type="text/css" />
}

@section scripts {
    <script src="~/lib/dragula/dragula.min.js"></script>
    <script src="~/js/pages/jquery.dragula.init.js"></script>
}